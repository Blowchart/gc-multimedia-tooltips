!function(a){function b(){this.originalData={},this.data={},this.type,this.leaveSelectedDatapoint=!1,this.tooltipClass="chart-tooltip",this.chartDomElement,this.chartClass,this._calculateTooltipArea=function(a){var b=a.offset(),c=a[0].getBoundingClientRect(),d={left:b.left-c.left,top:b.top-c.top};return{bottom:c.bottom+d.top,height:c.height,left:c.left+d.left,right:c.right+d.left,top:c.top+d.top,width:c.width}}}a.tooltips=function(c,d,e){if("object"!=typeof c);else if("object"!=typeof d);else if("object"==typeof e){var f=new b;return f.type=d.gh,f.chartClass=d,f.chartDomElement=a(d.ma),f.setOriginalData(c),f.parseTooltips(),e=a.extend(e,{tooltip:{isHtml:!0,trigger:"both"}}),google.visualization.events.addListener(d,"select",function(){if(f.leaveSelectedDatapoint)d.setSelection([f.leaveSelectedDatapoint]);else{var a=d.getSelection()[0];f.toggleTooltip(a,"select")}}),google.visualization.events.addListener(d,"onmouseover",function(b){!a("."+f.tooltipClass+".selected:hover",f.chartDomElement).length&&b&&f.toggleTooltip(b,"mouseover")}),google.visualization.events.addListener(d,"onmouseout",function(){var a=d.getSelection()[0];f.toggleTooltip(a,"mouseout")}),f.chartDomElement.on("click",function(b){if(a("."+f.tooltipClass+".selected",f.chartDomElement).length){var c=f._calculateTooltipArea(a("."+f.tooltipClass+".selected",f.chartDomElement));b.pageX>c.left&&b.pageX<c.right&&b.pageY>c.top&&b.pageY<c.bottom?f.leaveSelectedDatapoint=f.chartClass.getSelection()[0]:f.leaveSelectedDatapoint=!1}else f.leaveSelectedDatapoint=!1}),f}},b.prototype.parseContent=function(a){if("string"==typeof a&&a.length){var b;b=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])(?![^<]*>|[^<>]*<\/)/i,a=a.replace(b,function(a){var b,c;if(/\.(gif|jpg|jpeg|tiff|png)/i.test(a))return"<div class='chart-parsed-img-wrapper loading'><a href='"+a+"' title='"+a.replace(/"/g,'"')+"' target='_blank' class='chart-parsed-img'><img src='"+a+"' alt='"+a.replace(/"/g,'"')+"' /></a></div>";if((c=/\.(mp3|m4a|ogg)/i.exec(a))&&2==c.length){switch(c[1]){case"mp3":b="<source src='"+a+"' type='audio/mpeg'>";break;case"m4a":b="<source src='"+a+"' type='audio/mp4'>";break;case"ogg":b="<source src='"+a+"' type='audio/ogg'>"}return"<div class='chart-parsed-audio-wrapper loading'><audio controls class='chart-parsed-audio'>"+b+"Unable to play audio</audio><a href='"+a+"' title='"+a.replace(/"/g,'"')+"' target='_blank' class='chart-parsed-url'>open url</a></div>"}if((c=/\.(webm|mp4)/i.exec(a))&&2==c.length){switch(c[1]){case"mp4":b="<source src='"+a+"' type='video/mp4'>";break;case"webm":b="<source src='"+a+"' type='video/webm'>"}return"<div class='chart-parsed-video-wrapper loading'><video controls class='chart-parsed-video'>"+b+"Unable to play video</video><a href='"+a+"' title='"+a.replace(/"/g,'"')+"' target='_blank' class='chart-parsed-url'>open url</a></div>"}return"<a href='"+a+"' title='"+a.replace(/"/g,'"')+"' target='_blank' class='chart-parsed-url'>"+a+"</a>"})}return a},b.prototype.parseTooltips=function(){var a=this,b=["pie","geo","bubble","scatter"].indexOf(this.type)>-1;a.originalData.rows.forEach(function(c,d){var e={},f="",g="";if(c.c.forEach(function(c,d){if("undefined"!=typeof a.originalData.cols[d]&&a.originalData.cols[d].label){var h=c.f?c.f:c.v,i=h;if("string"==a.originalData.cols[d].type&&(i=a.parseContent(i),i!=h&&"…"==i.substring(i.length-1)&&(i=i.substring(0,i.length-1))),d>0){var j=a.originalData.cols[d].label;j=b?j:a.parseContent(j),i=j==a.originalData.cols[d].label?"<p><b>"+j+":</b> "+i+"</p>":"…"==j.substring(j.length-1)?j.substring(0,j.length-1):j,i=b?i:g+i}else i="<p>"+i+"</p>",g=i;e[d]=i,b&&(f+=i)}}),b)for(var h=0;h<Object.keys(e).length;h++)e[h]=f;a.data[d]=e})},b.prototype.toggleTooltip=function(b,c){var d=this,e=d.chartClass.getSelection()[0];if("select"==c&&a(".chart-parsed-audio, .chart-parsed-video").each(function(a,b){b.pause()}),a("."+d.tooltipClass,d.chartDomElement).addClass("hidden"),a("."+d.tooltipClass,d.chartDomElement).removeClass("hovered selected"),"object"==typeof b&&b&&"undefined"!=typeof b.row&&"undefined"!=typeof b.column){var f=parseInt(b.row),g=b.column?b.column:0;if("undefined"!=typeof d.data[f]){var h=a(".google-visualization-tooltip:"+(e&&e.row>f?"first":"last"),d.chartDomElement);if(d.chartDomElement.off("mousemove"),h.length){var i=a("."+d.tooltipClass+"[data-id='"+f+":"+g+"']",d.chartDomElement);if(i.length)h.addClass("hidden"),i.removeClass("hidden");else{i=a("<div class='"+d.tooltipClass+"' data-id='"+f+":"+g+"'>"+d.data[f][g]+"</div>");var j=h.offset(),k=h.outerHeight();h.after(i);var l=i.outerHeight(),m=j.top+(k-l);m=m<d.chartDomElement.offset().top?d.chartDomElement.offset().top:m,j.top=m,i.offset(j),h.remove(),a(".chart-parsed-img-wrapper.loading",i).length&&a(".chart-parsed-img-wrapper img",i).on("load",function(){a(this).parents(".chart-parsed-img-wrapper:first").removeClass("loading")}).on("error",function(){a(this).parents(".chart-parsed-img-wrapper:first").removeClass("loading").addClass("chart-parsed-img-fail"),a(this).parents(".chart-parsed-img-wrapper:first").html("<span>Image failed to load<br /><a href='"+a(this).attr("src")+"' target='_blank'>open url</a></span>")}),a(".chart-parsed-audio-wrapper.loading",i).length&&(a(".chart-parsed-audio-wrapper audio",i)[0].addEventListener("loadeddata",function(){a(this).parents(".loading:first").removeClass("loading")}),a(".chart-parsed-audio-wrapper audio",i)[0].addEventListener("error",function(b){var c=a(this).find("source").attr("src");a(this).parents(".chart-parsed-audio-wrapper:first").removeClass("loading").addClass("chart-parsed-audio-fail"),a(this).parents(".chart-parsed-audio-wrapper:first").html("<span>Audio failed to load<br /><a href='"+c+"' target='_blank'>open url</a></span>")},!0)),a(".chart-parsed-video-wrapper.loading",i).length&&(a(".chart-parsed-video-wrapper video",i)[0].addEventListener("loadeddata",function(){a(this).parents(".loading:first").removeClass("loading")}),a(".chart-parsed-video-wrapper video",i)[0].addEventListener("error",function(){var b=a(this).find("source").attr("src");a(this).parents(".chart-parsed-video-wrapper:first").removeClass("loading").addClass("chart-parsed-video-fail"),a(this).parents(".chart-parsed-video-wrapper:first").html("<span>Video failed to load<br /><a href='"+b+"' target='_blank'>open url</a></span>")},!0))}if(("select"==c||"mouseout"==c)&&e&&b&&e.row==b.row&&e.column==b.column&&i.addClass("selected"),"mouseover"==c&&b){var n=d._calculateTooltipArea(i);d.chartDomElement.on("mousemove",function(a){e&&b&&e.row==b.row&&e.column==b.column?d.toggleTooltip(b,"select"):a.pageX>n.left&&a.pageX<n.right&&a.pageY>n.top&&a.pageY<n.bottom?i.addClass("hovered"):i.removeClass("hovered")}),d.chartDomElement.mousemove()}}}}},b.prototype.setOriginalData=function(a){this.originalData={cols:a.Ff,rows:a.Gf}}}(jQuery);